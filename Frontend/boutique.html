<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Boutique Longrich | Tous nos produits √† Abidjan</title>
    <meta name="description" content="D√©couvrez tous les produits Longrich disponibles : Dentifrice, Savons, Huiles, Lait de corps. Livraison rapide √† Abidjan et partout en C√¥te d'Ivoire.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#10B981', accent: '#F59E0B', dark: '#1F2937', light: '#F9FAFB' },
                    fontFamily: { sans: ['Inter', 'sans-serif'] }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="data.js"></script>
    <script src="script.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body class="bg-light text-dark font-sans pb-20" x-data="shopAll">

    <nav class="bg-white shadow-sm py-4 sticky top-0 z-50 px-4 flex justify-between items-center">
        <a href="index.html" class="font-extrabold text-xl tracking-tighter text-primary uppercase">SUBLIME<span class="text-dark">HAVEN</span></a>
        
        <div class="flex items-center gap-4">
            <a href="index.html" class="text-[10px] font-bold text-gray-400 uppercase tracking-wide hidden sm:block">Retour Accueil</a>
            <a href="#commande" class="relative text-sm font-bold text-accent flex items-center gap-1 border border-accent/20 px-3 py-1.5 rounded-full bg-accent/5">
                <span>Panier</span>
                <span x-show="cart.length > 0" class="bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full" x-text="cart.length"></span>
            </a>
        </div>
    </nav>

    <header class="bg-primary py-10 px-4 text-center text-white mb-6 rounded-b-[2rem] shadow-lg">
        <h1 class="text-2xl font-bold mb-2">La Boutique Compl√®te</h1>
        <p class="text-sm opacity-90">Composez votre panier sur mesure.</p>
    </header>

    <div class="px-4 mb-6 overflow-x-auto whitespace-nowrap no-scrollbar flex gap-2 justify-center sm:justify-start">
        <template x-for="cat in ['Tout', 'Hygi√®ne', 'Corps', 'Sant√©', 'Cheveux']">
            <button @click="filter = cat" 
                :class="filter === cat ? 'bg-dark text-white shadow-md transform scale-105' : 'bg-white text-gray-600 border'"
                class="px-4 py-2 rounded-full text-xs font-bold transition duration-200" x-text="cat"></button>
        </template>
    </div>

    <div class="px-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 max-w-4xl mx-auto mb-12">
        <template x-for="item in filteredItems" :key="item.id">
            <div class="bg-white rounded-xl shadow-sm p-3 flex flex-col h-full border border-gray-100 cursor-pointer hover:shadow-md transition relative overflow-hidden" 
                 :class="isInCart(item.id) ? 'ring-2 ring-primary' : ''">
                
                <div x-show="isInCart(item.id)" class="absolute top-2 right-2 bg-primary text-white text-[10px] px-2 py-1 rounded-full z-10 font-bold shadow animate-bounce">
                    Dans le panier ‚úì
                </div>

                <div class="bg-gray-50 rounded-lg mb-3 p-2 h-32 flex items-center justify-center relative overflow-hidden" @click="activeProduct = item">
                    <img :src="item.img" class="max-h-full object-contain transform hover:scale-110 transition duration-500">
                </div>
                
                <div class="flex-grow" @click="activeProduct = item">
                    <span class="text-[10px] text-green-600 font-bold uppercase tracking-wider" x-text="item.category"></span>
                    <h3 class="font-bold text-xs text-dark leading-tight mt-1 mb-1" x-text="item.name"></h3>
                    <p class="text-[10px] text-gray-400 line-clamp-2" x-text="item.desc_short"></p>
                </div>
                
                <div class="mt-3 pt-2 border-t border-gray-50">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-extrabold text-sm text-primary" x-text="new Intl.NumberFormat('fr-FR').format(item.price) + ' F'"></span>
                    </div>
                    <button @click.stop="toggleCart(item)" 
                            :class="isInCart(item.id) ? 'bg-gray-100 text-gray-600' : 'bg-dark text-white'"
                            class="w-full py-2 rounded-lg font-bold text-xs shadow-sm transition active:scale-95">
                        <span x-text="isInCart(item.id) ? 'Retirer du panier' : 'Ajouter au panier +'"></span>
                    </button>
                </div>
            </div>
        </template>
    </div>

    <section id="commande" class="py-10 px-4 bg-white border-t border-gray-200">
        <div class="max-w-md mx-auto bg-white border-2 border-gray-100 rounded-2xl shadow-2xl overflow-hidden relative">
            
            <div class="bg-dark p-5 text-center text-white">
                <h3 class="font-bold text-xl">Valider mon Panier</h3>
                <p class="text-xs text-gray-400 mt-1">Livraison Rapide ‚Ä¢ Paiement √† l'arriv√©e</p>
            </div>
            
            <div class="p-6 space-y-4">
                
                <div x-show="cart.length === 0" class="text-center py-8 text-gray-400">
                    <p class="text-4xl mb-2">üõí</p>
                    <p class="text-sm">Votre panier est vide.</p>
                    <p class="text-xs mt-1">Ajoutez des produits ci-dessus.</p>
                </div>

                <div x-show="cart.length > 0" class="bg-gray-50 p-4 rounded-xl border border-dashed border-gray-300">
                    
                    <template x-for="item in cart" :key="item.id">
                        <div class="flex justify-between items-center text-xs text-gray-600 mb-2 border-b border-gray-200 pb-2 last:border-0 last:pb-0">
                            <div class="flex items-center gap-2">
                                <button @click="toggleCart(item)" class="text-red-400 hover:text-red-600 font-bold px-1">‚úï</button>
                                <span class="font-bold text-dark" x-text="item.name"></span>
                            </div>
                            <span x-text="formatPrice(item.price) + ' F'"></span>
                        </div>
                    </template>

                    <div class="mt-4 mb-4 pt-4 border-t border-gray-100">
                        <label class="block text-[10px] font-bold text-gray-500 mb-1 uppercase">Avez-vous un code promo ?</label>
                        <div class="flex gap-2">
                            <input x-model="promoInput" type="text" placeholder="Entrez le code ici" 
                                class="flex-1 bg-white border border-gray-200 rounded px-3 py-2 text-xs uppercase focus:ring-1 focus:ring-primary focus:outline-none">
                            <button @click="applyPromo()" class="bg-gray-800 text-white text-[10px] font-bold px-3 py-2 rounded hover:bg-black transition">
                                OK
                            </button>
                        </div>
                        
                        <p x-show="promoMessage" x-text="promoMessage" 
                        :class="promoError ? 'text-red-500' : 'text-green-600'" 
                        class="text-[10px] font-bold mt-1"></p>
                        
                        <div x-show="appliedPromo" class="flex justify-between items-center mt-2 text-green-600 text-xs font-bold bg-green-50 p-2 rounded border border-green-100">
                            <span>R√©duction appliqu√©e :</span>
                            <span x-text="'- ' + formatPrice(discountAmount) + ' F'"></span>
                        </div>
                    </div>
                    
                    <div class="border-t border-gray-200 mt-3 pt-3">
                        <div class="flex justify-between items-center mb-2 text-gray-500 text-xs">
                            <span>Sous-total produits :</span>
                            <span x-text="formatPrice(subtotal) + ' F'"></span>
                        </div>

                        <div class="mb-3 bg-white p-2 rounded border border-gray-200">
                            <label class="block text-[10px] font-bold text-dark mb-1 uppercase tracking-wide">
                                üìç O√π doit-on livrer ?
                            </label>
                            <select x-model="selectedZoneId" class="w-full bg-transparent font-bold text-xs text-dark focus:outline-none">
                                <template x-for="zone in zones" :key="zone.id">
                                    <option :value="zone.id" x-text="zone.name + ' (+' + zone.price + ' F)'"></option>
                                </template>
                            </select>
                        </div>

                        <div class="flex justify-between items-end font-extrabold text-xl text-primary mt-3 pt-3 border-t border-gray-300">
                            <div class="flex flex-col">
                                <span class="text-sm text-gray-500 font-normal">Total √† payer :</span>
                                <span class="text-[10px] text-gray-400 font-normal" x-text="'(Livraison: ' + activeZone.price + ' F)'"></span>
                            </div>
                            <span x-text="formatPrice(total) + ' FCFA'"></span>
                        </div>
                    </div>
                </div>

                <div x-show="cart.length > 0" class="space-y-3 pt-2">
                    <div class="relative">
                        <span class="absolute left-3 top-3.5 text-gray-400">üë§</span>
                        <input x-model="customer.name" type="text" class="w-full bg-gray-50 border border-gray-200 rounded-xl p-3 pl-10 focus:ring-2 focus:ring-primary focus:bg-white transition" placeholder="Votre Nom Complet">
                    </div>
                    <div class="relative">
                        <span class="absolute left-3 top-3.5 text-gray-400">üìû</span>
                        <input x-model="customer.phone" type="tel" class="w-full bg-gray-50 border border-gray-200 rounded-xl p-3 pl-10 focus:ring-2 focus:ring-primary focus:bg-white transition" placeholder="Votre Num√©ro WhatsApp">
                    </div>
                    <div class="relative">
                        <span class="absolute left-3 top-3.5 text-gray-400">üìç</span>
                        <input x-model="customer.city" type="text" class="w-full bg-gray-50 border border-gray-200 rounded-xl p-3 pl-10 focus:ring-2 focus:ring-primary focus:bg-white transition" placeholder="Ville et Quartier">
                    </div>

                    <button @click="submitOrder()" class="group relative w-full bg-gradient-to-r from-accent to-yellow-600 text-white font-extrabold text-xl py-4 rounded-xl shadow-lg shadow-yellow-500/30 overflow-hidden transform transition active:scale-95 mt-4">
                        <div class="absolute inset-0 bg-white/20 transform -translate-x-full skew-x-12 group-hover:animate-shine"></div>
                        <span class="relative z-10 flex justify-center items-center gap-2">
                            COMMANDER MAINTENANT
                        </span>
                    </button>
                </div>

                <div class="grid grid-cols-3 gap-2 py-4 mt-6 bg-gray-50 border border-gray-100 rounded-xl">
                    <div class="flex flex-col items-center text-center">
                        <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm text-lg mb-1">üöö</div>
                        <h4 class="font-bold text-[10px] text-dark">Exp√©dition 24H</h4>
                        <p class="text-[9px] text-gray-400">Abidjan</p>
                    </div>
                    <div class="flex flex-col items-center text-center">
                        <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm text-lg mb-1">ü§ù</div>
                        <h4 class="font-bold text-[10px] text-dark">Paiement Cash</h4>
                        <p class="text-[9px] text-gray-400">√Ä la livraison</p>
                    </div>
                    <div class="flex flex-col items-center text-center">
                        <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm text-lg mb-1">üíé</div>
                        <h4 class="font-bold text-[10px] text-dark">Authentique</h4>
                        <p class="text-[9px] text-gray-400">Certifi√© Longrich</p>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <div x-show="activeProduct" style="display: none;"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 translate-y-full"
         x-transition:enter-end="opacity-100 translate-y-0"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 translate-y-0"
         x-transition:leave-end="opacity-0 translate-y-full"
         class="fixed inset-0 z-[60] flex items-end justify-center sm:items-center bg-black/60 backdrop-blur-sm p-0 sm:p-4">
        
        <div class="bg-white w-full max-w-md p-6 rounded-t-3xl sm:rounded-3xl relative h-[85vh] sm:h-auto flex flex-col shadow-2xl" @click.outside="activeProduct = null">
            
            <button @click="activeProduct = null" class="absolute top-4 right-4 bg-gray-100 w-8 h-8 rounded-full flex items-center justify-center text-gray-600 font-bold hover:bg-gray-200 transition">‚úï</button>
            
            <template x-if="activeProduct">
                <div class="flex flex-col h-full">
                    <div class="flex justify-center mb-6 mt-4">
                        <img :src="activeProduct.img" class="h-48 object-contain drop-shadow-xl">
                    </div>
                    
                    <span class="inline-block self-start bg-green-100 text-green-800 text-[10px] px-2 py-1 rounded font-bold uppercase tracking-wide mb-2" x-text="activeProduct.category"></span>
                    
                    <h2 class="text-2xl font-extrabold text-dark mb-2" x-text="activeProduct.name"></h2>
                    <p class="text-xl font-bold text-primary mb-6" x-text="new Intl.NumberFormat('fr-FR').format(activeProduct.price) + ' FCFA'"></p>
                    
                    <div class="overflow-y-auto flex-grow pr-2 mb-6 scrollbar-thin">
                        <h3 class="text-sm font-bold text-dark mb-2">Description</h3>
                        <p class="text-sm text-gray-600 leading-relaxed" x-text="activeProduct.desc_long"></p>
                    </div>
                    
                    <button @click="toggleCart(activeProduct); activeProduct = null" 
                            :class="isInCart(activeProduct.id) ? 'bg-gray-100 text-gray-600' : 'bg-dark text-white'"
                            class="w-full font-bold py-4 rounded-xl shadow-lg flex justify-center items-center gap-2 mt-auto transition active:scale-95">
                        <span x-text="isInCart(activeProduct.id) ? 'RETIRER DU PANIER' : 'AJOUTER AU PANIER'"></span>
                    </button>
                </div>
            </template>
        </div>
    </div>

    <footer class="bg-dark text-gray-400 py-10 px-4">
        <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-sm">
            <div>
                <span class="font-extrabold text-white text-lg uppercase tracking-tighter">SUBLIME<span class="text-primary">HAVEN</span></span>
                <p class="mt-4 leading-relaxed">Votre destination pour des soins dermo-cosm√©tiques authentiques et efficaces. Nous livrons le bien-√™tre √† votre porte.</p>
            </div>
            <div>
                <h4 class="text-white font-bold mb-4 uppercase text-xs tracking-widest">Liens Rapides</h4>
                <ul class="space-y-2">
                    <li><a href="visage.html" class="hover:text-primary transition flex items-center gap-2"><span>‚Üí</span> Soins Visage</a></li>
                    <li><a href="teint.html" class="hover:text-primary transition flex items-center gap-2"><span>‚Üí</span> Soins du Corps</a></li>
                    <li><a href="cheveux.html" class="hover:text-primary transition flex items-center gap-2"><span>‚Üí</span> Traitement Cheveux</a></li>
                    <li><a href="douleur.html" class="hover:text-primary transition flex items-center gap-2"><span>‚Üí</span> Anti-Douleurs</a></li>
                    <li><a href="boutique.html" class="hover:text-primary transition flex items-center gap-2 text-accent font-bold"><span>‚òÖ</span> La Boutique Compl√®te</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-white font-bold mb-4 uppercase text-xs tracking-widest">Contact</h4>
                <p>Abidjan, C√¥te d'Ivoire</p>
                <p class="mt-2">Tel: +225 07 00 00 00 00</p>
            </div>
        </div>
        <div class="border-t border-gray-700 mt-10 pt-6 text-center text-xs">
            &copy; 2025 Sublime Haven. Distributeur Ind√©pendant agr√©√© Longrich. Tous droits r√©serv√©s.
        </div>
    </footer>

</body>
</html>